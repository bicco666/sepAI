<!doctype html><html><body><h1>sepAI Dashboard</h1>
<script>
(function(){
  async function initStoredAddress(){
    try{
      const r = await fetch('/api/v1/wallet/address');
      const data = await r.json();
      if (data && data.public_key){
        localStorage.setItem('sepai.wallet.address', data.public_key);
        const chip = document.querySelector('.wallet .mono');
        if (chip) chip.textContent = data.public_key;
      }
    }catch(e){ console.warn('address init failed', e); }
  }
  async function addQuickAirdrop(){
    const nav = document.querySelector('#quickTabs') || document.querySelector('.quick-tabs');
    if (!nav) return;
    const a = document.createElement('a');
    a.href = '#';
    a.textContent = 'Devnet Airdrop 0.2 SOL';
    a.className = 'test-link';
    a.addEventListener('click', async (ev) => {
      ev.preventDefault();
      const addr = localStorage.getItem('sepai.wallet.address') || prompt('Adresse?');
      if (!addr) return;
      const body = new URLSearchParams({address: addr, sol: '0.2'}).toString();
      const r = await fetch('/api/v1/wallet/airdrop', {method:'POST', headers:{'Content-Type':'application/x-www-form-urlencoded'}, body});
      const t = await r.text(); let j=t; try{ j=JSON.parse(t);}catch{}
      alert('Airdrop ' + (r.ok?'OK':'Fehler '+r.status) + '\n' + (typeof j==='string'?j:JSON.stringify(j,null,2)));
    });
    nav.appendChild(a);
  }
  if (document.readyState!=='loading') { initStoredAddress(); addQuickAirdrop(); }
  else { document.addEventListener('DOMContentLoaded', ()=>{ initStoredAddress(); addQuickAirdrop(); }); }
})();
</script>

</body></html>